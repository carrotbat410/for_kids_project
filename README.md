# 👶 모두의 육아 - Backend

<a href="https://modu6ah.com"><img src="https://user-images.githubusercontent.com/91789496/182133398-7ff4bbd2-96f9-43bc-a996-63522d57607d.png"></a>

## 🏠 [모두의 육아 사이트 주소](https://modu6ah.com) (서비스 종료)

<hr>

## 🗂️ 목차

### 1. 프로젝트 소개

### 2. 프로젝트 기간

### 3. 팀원 소개

### 4. 주요 기능

### 5. 서비스 아키텍처

### 6. 기술스택

### 7. 라이브러리

### 8. 트러블 슈팅

<hr>

## 👶 1. 프로젝트 소개

#### 공동육아 모집 및 정보 공유 커뮤니티

-  공동육아 함께 할 멤버를 모집하고
-  육아템, 장소 등 다양한 꿀정보를 공유해요!

<br> 

## 🗓 2. 프로젝트 기간

- 2023년 10월 12일 ~ 2023년 11월 12일

<br>

## 🧑‍💻 3. 팀원 소개

<table>
  <tr>
  <td colspan='1' align="center">
  Backend
  </td>
  <td colspan='1' align="center">
  Frontend
  </td>
  <td colspan='1' align="center">
  Designer
  </td>
  <tr>
    <td align="center" >
    <b>이창민</b></a><br>
    <a href="https://github.com/carrotbat410">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center">
    <b>김숙영</b></a><br />
    <a href="https://github.com/Maiowol" >Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    <td align="center">
    <b>서혜빈</b></a><br />
    <a href="https://www.figma.com/file/6oxe17NH1VuhHdZxdj9X9N/항해99_v1">Figma</a>
    </td>
    <tr>
    <td align="center">
    <b>안재훈</b></a><br /> 
    <a href="https://github.com/anjaehun">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    <td align="center">
    <b>정인성</b></a><br /> 
    <a href="https://github.com/inseongei">Github</a>
    <br><img src="https://img.shields.io/badge/React-61DAFB?style=flat&logo=React&logoColor=white"/><br>
    </td>
    </tr>
    <tr>
    <td align="center">
    <b>조세림</b></a><br /> 
    <a href="https://github.com/selim-jo">Github</a>
    <br><img src="https://img.shields.io/badge/Node.js-339933?style=flat&logo=Node.js&logoColor=white"/><br>
    </td>
    </tr>
</table>

<br>

## 🕹️ 4. 주요 기능

### 로그인 / 회원가입

- 로컬 회원가입 시 사용자는 이메일 인증을 통해 회원가입을 진행할 수 있습니다.

- 로컬 로그인과 카카오 소셜 로그인 둘 중 편리한 방법을 선택하여 로그인할 수 있습니다.

### 메인 페이지

- 카테고리별로 게시글을 볼 수 있습니다.

- 체험모집 게시글은 모집중이면서 최근 게시글 기준으로 6개씩 보여줍니다.

- 장소추천 게시글은 별점이 높으면서 최근 게시글 기준으로 2개씩 보여줍니다.

- 육아템 리뷰 게시글은 최근 게시글 기준으로 2개씩 보여줍니다.

### 체험모집 게시글

- 원하는 게시글을 클릭하고 상세보기로 들어가면 댓글을 작성할 수 있습니다.

- 무한 스크롤을 통해 게시글을 조회할 수 있습니다.

- 게시글 수정 시 토글을 통해 모집상태를 수정할 수 있습니다.

### 장소추천 게시글

- 게시글 작성 시 다중 이미지를 업로드할 수 있습니다.

- 게시글 조회 시 카카오맵을 통해 장소를 한눈에 볼 수 있습니다.

- 원하는 게시글을 클릭하고 상세보기로 들어가면 댓글을 작성할 수 있습니다.

- 무한 스크롤을 통해 게시글을 조회할 수 있습니다.

### 육아템 리뷰 게시글

- 게시글 작성 시 다중 이미지를 업로드할 수 있습니다.

- 원하는 게시글을 클릭하고 상세보기로 들어가면 댓글을 작성할 수 있습니다.

- 무한 스크롤을 통해 게시글을 조회할 수 있습니다.

### 1:1 실시간 채팅

- 체험모집 게시글에서 관심있는  게시글에 대해 1:1 채팅을 할 수 있습니다.

- 로그인한 상태에서 1:1 실시간 채팅이 오면 화면 왼쪽 아래 알림이 뜹니다.

### 검색

- 게시글의 제목과 내용에 포함된 검색어를 입력하면 검색어가 포함된 게시글을 카테고리별로 보여줍니다.

- 검색한 게시글을 클릭하면 해당 게시글의 상세페이지로 이동합니다.

### 마이페이지(프로필 조회/북마크 조회)

- 프로필 조회에서 프로필 이미지 및 자기소개 수정을 할 수 있습니다.

- 북마크 조회에서 본인이 북마크한 게시글에 대한 정보를 카테코리별로 한눈에 볼 수 있습니다.

<br>

## 🧱 5. 서비스 아키텍처

<img src="https://user-images.githubusercontent.com/91789496/182150151-b651688c-84cc-496c-9dd5-fb7b1579f34f.png" width="600" height="340"/>


<br>

## 🛠 6. 기술스택

기술스택 | 설명
---|:---:
Node.js | 자바스크립트 런타임
Express | 웹 프레임워크
MongoDB | NoSQL DB
github actions | CI/CD 툴
Nginx | Reverse Proxy 서버 및 Load Balancer의 역할로 사용

<br>

## 📖 7. 라이브러리

라이브러리 | 설명
---|:---:
<img src='https://img.shields.io/badge/artiller-lightgrey'> | 서버 부하 테스트
<img src='https://img.shields.io/badge/bcrypt-lightgrey'> | 비밀번호 암호화
<img src='https://img.shields.io/badge/cors-lightgrey'> | 교차 리소스 공유
<img src='https://img.shields.io/badge/dotenv-lightgrey'>  | 환경변수 관리
<img src='https://img.shields.io/badge/express-lightgrey'> | 서버
<img src='https://img.shields.io/badge/helmet-lightgrey'>  | HTTP 헤더 보안
<img src='https://img.shields.io/badge/joi-lightgrey'>  | 입력데이터 검출
<img src='https://img.shields.io/badge/jest-lightgrey'>  | 테스트 코드
<img src='https://img.shields.io/badge/jsonwebtoken-lightgrey'>  | 서명 암호화
<img src='https://img.shields.io/badge/moment-lightgrey'> | 날짜 라이브러리
<img src='https://img.shields.io/badge/morgan-lightgrey'> | Http Log 기록
<img src='https://img.shields.io/badge/mongoose-lightgrey'> | mongoDB
<img src='https://img.shields.io/badge/swagger--ui--express-lightgrey'> | API 문서화
<img src='https://img.shields.io/badge/winston-lightgrey'> | Log 파일 생성
<img src='https://img.shields.io/badge/winston--daily--rotate--file-lightgrey'> | Log 파일 관리
<img src='https://img.shields.io/badge/multer--s3--transform-lightgrey'> | 이미지 저장
<img src='https://img.shields.io/badge/node--schedule-lightgrey'> | 스케줄 업무 자동화
<img src='https://img.shields.io/badge/socket.io-lightgrey'> | 실시간 통신

<br>

## ❗8. 트러블 슈팅 (백엔드)

<details>
<summary>load balancing 적용 후 socket 통신 오류</summary>

`문제 사항`
- 2개의 EC2 인스턴스를 띄우고 로드 밸런싱을 적용하니, 같은 인스턴스에 할당된 유저들끼리만 소켓 통신이 됨.

`원인 분석`
- Socket.io Docs를 참고하여, 서로 다른 인스턴스의 socket통신을 연결해주는 "Message Broker"가 필요하다는 것을 파악.

`해결 방법`
- "Message Broker"로 사용할 Redis를 띄우고, 각 노드 서버에 Redis Adapter를 설치하여 연결함.

`개선 결과`
- 서로 다른 2개의 EC2 Instance간의 Socket통신이 정상적으로 이루어짐.

</details>

## ⭐️ 9. 유저 피드백


### 1. 모집 날짜가 지났을 때의 모집 상태 변경 자동화

  - **유저 의견**
  
    "직접 모집완료로 변경하는것이 불편하고 까먹어 날짜가 지나도 모집중인 게시글이 있어 헷갈립니다."
  
  - **해결 방법**

    scehduler를 이용하여, 24:00시에 모집기간이 지난 게시글의 상태를 업데이트 하는 스케쥴을 등록하여 해결함.
    
    <img src="https://user-images.githubusercontent.com/91789496/183235901-e9cfa853-5a0a-4e8e-8be8-6449501adb14.png" width="600" height="340"/>
